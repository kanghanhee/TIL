### 모나드?

자바스크립트에서 굳이 모나드에 대해 언급할 필요는 없지만, Array나 Promise를 통해 모나드가 무엇인지 알 수 있고, 모나드의 함수 합성에서의 안정성을 살펴볼 수 있다.

`Promise는 비동기 상황에서 함수 합성을 안전하게 하기 위한 도구(모나드)라고 할 수 있다.`

함수 합성을 해보면 빈값이 들어와도 강제로 함수 실행이 되면서 NaN 같은 이상한 결과가 나온다.

```javascript
const g = (a) => a + 1;
const f = (a) => a * a;

console.log(f(g(1))); // 4
console.log(f(g())); // NaN 빈 값을 전달하면 에러, 안전하게 합성되지 않음
```

이번엔 모나드 형태로 함수 합성을 해보겠다.

아래에서 콘솔이 찍히지 않는 이유는 r에 들어오는 값이 없어서가 아니라 `r => console.log(r)` 함수 자체가 실행이 안되기 때문이다.

즉, Array에 값이 있는지 없는지에 따라서 함수를 안전하게 합성하고 있다는 얘기다.

```javascript
Array.of() // Array.of(1) === []
  .map(g)
  .map(f)
  .forEach((r) => console.log(r)); // 아무일도 일어나지 않음.
```

모나드 형태로 Array를 map을 통해 합성하는 이유는 Array의 개수가 몇 개일지도 모르고, 값이 없을 수도 있는 상황에서 함수들을 연속적으로 안전하게 실행하고 합성하기 위해서다.

이런 함성관점에서 볼 때, Promise는 비동기 상황에서(아직 빈 값임) 함수를 적절한 시점에 평가해서 합성시킬 수 있는 도구로도 바라볼 수 있다.

```javascript
Promise.resolve(1)
  .then(g)
  .then(f)
  .then((r) => console.log(r));
```
